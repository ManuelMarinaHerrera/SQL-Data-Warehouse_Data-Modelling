CREATE TABLE TICKET_TABLE (TICKET_ID BIGINT NOT NULL AUTO_INCREMENT, TIMEPLACE TIMESTAMP, STORE_ID SMALLINT, EMPLOYEE_ID SMALLINT, CASHIERNUM INT, ORDER_TYPE_ID SMALLINT, TOTAL_PRODUCT DECIMAL, TAX_TOTAL DECIMAL, TOTAL_ORDER DECIMAL, CURRENCY VARCHAR(20), PAYMENT_METHOD VARCHAR(20), PRIMARY KEY (TICKET_ID));
CREATE TABLE TICKET_ITEM_TABLE (TICKET_ID BIGINT, NUMSEQ SMALLINT AUTO_INCREMENT PRIMARY KEY, PRODUCT_ID BIGINT, DESCRIP VARCHAR(80), QUANTITY SMALLINT, CURRENCY VARCHAR(10), PRICE DECIMAL, TAX_AMOUNT DECIMAL, PRODUCT_AMOUNT DECIMAL);
ALTER TABLE TICKET_ITEM_TABLE ADD FOREIGN KEY (TICKET_ID) REFERENCES TICKET_TABLE (TICKET_ID);
CREATE TABLE ORDER_TYPE_TABLE (ORDER_TYPE_ID SMALLINT NOT NULL AUTO_INCREMENT, ORDER_TYPE SMALLINT, TYPE_DESCRIPTION SMALLINT, PLATFORM_ID SMALLINT, PRIMARY KEY (ORDER_TYPE_ID))
ALTER TABLE TICKET_TABLE ADD FOREIGN KEY (ORDER_TYPE_ID) REFERENCES ORDER_TYPE_TABLE (ORDER_TYPE_ID)
CREATE TABLE PLATFORM_TABLE (PLATFORM_ID SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT, PLATFORM_TYPE SMALLINT, DESCRIP SMALLINT, COMPANY_ID SMALLINT)
ALTER TABLE ORDER_TYPE_TABLE ADD FOREIGN KEY (PLATFORM_ID) REFERENCES PLATFORM_TABLE (PLATFORM_ID)
CREATE TABLE DELIVERY_COMPANY_TABLE (COMPANY_ID SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT, DELIVERY_TYPE_TABLE SMALLINT, DESCRIP CHAR(80), COMPANY_NAME CHAR(20))
ALTER TABLE PLATFORM_TABLE ADD FOREIGN KEY (COMPANY_ID) REFERENCES DELIVERY_COMPANY_TABLE (COMPANY_ID)
CREATE TABLE CUSTOMER_TABLE (CUSTOMER_ID BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, TICKET_ID BIGINT REFERENCES TICKET_TABLE (TICKET_ID), CUSTOMER_LOYALTY_PROGRAM_ID BIGINT, ZIP_CODE SMALLINT, COUNTRY CHAR(20))
CREATE TABLE CUSTOMER_LOYALTY_TABLE (LOYALTY_ID BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, CUSTOMER_NAME CHAR(20), LAST_NAME CHAR(20), BIRTHDATE DATE, PHONE_NUMBER INT, NATIONAL_ID INT, CREDIT_CARD_PAYMENT_ID BIGINT)
ALTER TABLE CUSTOMER_TABLE ADD FOREIGN KEY (CUSTOMER_LOYALTY_PROGRAM_ID) REFERENCES CUSTOMER_LOYALTY_TABLE (LOYALTY_ID)
CREATE TABLE CUSTOMER_LOYALTY_CC (CC_PAYMENT_ID BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, IS_ENCRIPT CHAR(1), CARD_NUMBER BIGINT, BANK_NAME CHAR(20), CC_EXP_DATE DATE)
ALTER TABLE CUSTOMER_LOYALTY_TABLE ADD FOREIGN KEY (CREDIT_CARD_PAYMENT_ID) REFERENCES CUSTOMER_LOYALTY_CC (CC_PAYMENT_ID)
CREATE TABLE STORE_TABLE (STORE_ID SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT, LOCATION_ID BIGINT, EMPLOYEE_ID SMALLINT)
CREATE TABLE LOCATION_TABLE (LOCATION_ID BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, TYPE_ID CHAR(1), ADDRESS_ID INT)
CREATE TABLE LOCATION_TYPE_TABLE (TYPE_ID CHAR(1) NOT NULL PRIMARY KEY, DESCRIP CHAR(80))
ALTER TABLE STORE_TABLE ADD FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION_TABLE(LOCATION_ID)
ALTER TABLE LOCATION_TABLE ADD FOREIGN KEY (TYPE_ID) REFERENCES LOCATION_TYPE_TABLE(TYPE_ID)
CREATE TABLE EMPLOYEE_TABLE (EMPLOYEE_ID SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT, EMPLOYEE_NAME CHAR(25), EMPLOYEE_SALARY INT, CONTRACT_ID INT, YEARS_OF_EXPERIENCE SMALLINT, AGE SMALLINT, POSITION_ID SMALLINT)
CREATE TABLE JOB_TITLE_TABLE (POSITION_ID SMALLINT NOT NULL PRIMARY KEY AUTO_INCREMENT, DESCRIP CHAR(40))
CREATE TABLE CONTRACTS_TABLE (CONTRACT_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT, CONTRACT_TYPE CHAR(10))
ALTER TABLE EMPLOYEE_TABLE ADD FOREIGN KEY (CONTRACT_ID) REFERENCES CONTRACTS_TABLE(CONTRACT_ID)
ALTER TABLE EMPLOYEE_TABLE ADD FOREIGN KEY (POSITION_ID) REFERENCES JOB_TITLE_TABLE(POSITION_ID)
CREATE TABLE PHONE (LOCATION_ID BIGINT NOT NULL, NUMSEQ SMALLINT NOT NULL AUTO_INCREMENT PRIMARY KEY, EXTERNAL VARCHAR(20), INTERNAL VARCHAR(20), DESCRIP VARCHAR(20))
ALTER TABLE PHONE ADD FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION_TABLE(LOCATION_ID)
CREATE TABLE ADDRESS_TABLE (ADDRESS_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, TYPE_ID CHAR(1), NAME VARCHAR(40), ADDRESS_NUMBER SMALLINT, ZIPCODE INT, CITY VARCHAR(20))
ALTER TABLE TICKET_TABLE ADD FOREIGN KEY (STORE_ID) REFERENCES STORE_TABLE (STORE_ID)
CREATE TABLE ADDRESS_TYPE_TABLE (TYPE_ID CHAR(1) NOT NULL PRIMARY KEY, DESCRIP VARCHAR(40))
ALTER TABLE ADDRESS_TABLE ADD FOREIGN KEY (TYPE_ID) REFERENCES ADDRESS_TYPE_TABLE (TYPE_ID)
ALTER TABLE STORE_TABLE ADD FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE_TABLE (EMPLOYEE_ID)
CREATE TABLE ZIPCODE_TABLE (ZIPCODE INT NOT NULL, CITY VARCHAR(20), STATE VARCHAR(20), COUNTRY VARCHAR(20), PRIMARY KEY (ZIPCODE, CITY))
ALTER TABLE ADDRESS_TABLE ADD FOREIGN KEY (ZIPCODE,CITY) REFERENCES ZIPCODE_TABLE (ZIPCODE,CITY)
ALTER TABLE CUSTOMER_TABLE ADD FOREIGN KEY (TICKET_ID) REFERENCES TICKET_TABLE (TICKET_ID)
ALTER TABLE LOCATION_TABLE ADD FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS_TABLE (ADDRESS_ID)